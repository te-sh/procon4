---
layout: ../../../../../layouts/Content.astro
title: "ABC334 E"
problem: https://atcoder.jp/contests/abc334/tasks/abc334_e
---
Union-Find 法で緑色マスがどの森に含まれるかを求めておく.

このとき, ある赤色のマスを緑色に変えたときに森の数 (結成分数) がどのように変化するかを考える. これはその赤色のマスの上下左右4方向がどのようになっているかによる.

4方向がすべて赤色のマスならば, 森の数は $1$ つ増える.

4方向のマスに含まれる緑のマスの森の種類が $1$ 種類ならば, 森の数は変わらない.

同様に考えていくと, 森の数は4方向のマスに含まれる森の種類数を $K$ とすると, 森の数は $1-K$ 個増減する.

これをすべての赤色のマスについて計算して合計すればいい.
